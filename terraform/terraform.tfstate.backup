{
  "version": 4,
  "terraform_version": "0.13.4",
  "serial": 561,
  "lineage": "d317ad87-f5dc-769d-e392-e4e938209d1e",
  "outputs": {},
  "resources": [
    {
      "module": "module.ec2",
      "mode": "managed",
      "type": "aws_instance",
      "name": "bastion",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "ami": "ami-0f96495a064477ffb",
            "arn": "arn:aws:ec2:ap-southeast-2:518667233221:instance/i-04cd9f0850084986a",
            "associate_public_ip_address": false,
            "availability_zone": "ap-southeast-2a",
            "cpu_core_count": 1,
            "cpu_threads_per_core": 1,
            "credit_specification": [
              {
                "cpu_credits": "standard"
              }
            ],
            "disable_api_termination": false,
            "ebs_block_device": [],
            "ebs_optimized": false,
            "ephemeral_block_device": [],
            "get_password_data": false,
            "hibernation": false,
            "host_id": null,
            "iam_instance_profile": "",
            "id": "i-04cd9f0850084986a",
            "instance_initiated_shutdown_behavior": null,
            "instance_state": "running",
            "instance_type": "t2.micro",
            "ipv6_address_count": 0,
            "ipv6_addresses": [],
            "key_name": "deployer-key",
            "metadata_options": [
              {
                "http_endpoint": "enabled",
                "http_put_response_hop_limit": 1,
                "http_tokens": "optional"
              }
            ],
            "monitoring": false,
            "network_interface": [],
            "outpost_arn": "",
            "password_data": "",
            "placement_group": "",
            "primary_network_interface_id": "eni-09c6f2def7820ba4a",
            "private_dns": "ip-10-43-192-188.ap-southeast-2.compute.internal",
            "private_ip": "10.43.192.188",
            "public_dns": "",
            "public_ip": "",
            "root_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/xvda",
                "encrypted": false,
                "iops": 100,
                "kms_key_id": "",
                "volume_id": "vol-08b441086574dd182",
                "volume_size": 20,
                "volume_type": "gp2"
              }
            ],
            "secondary_private_ips": [],
            "security_groups": [],
            "source_dest_check": true,
            "subnet_id": "subnet-0008535141c060e9a",
            "tags": {
              "Name": "Bastion host"
            },
            "tenancy": "default",
            "timeouts": null,
            "user_data": null,
            "user_data_base64": null,
            "volume_tags": {},
            "vpc_security_group_ids": [
              "sg-0155faa475595a703"
            ]
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMCwidXBkYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.ec2.aws_key_pair.this",
            "module.ec2.aws_security_group.bastion-sg",
            "module.ec2.tls_private_key.this",
            "module.vpc.aws_subnet.public_subnet",
            "module.vpc.aws_vpc.this",
            "module.vpc.data.aws_availability_zones.available"
          ]
        }
      ]
    },
    {
      "module": "module.ec2",
      "mode": "managed",
      "type": "aws_key_pair",
      "name": "this",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:ap-southeast-2:518667233221:key-pair/deployer-key",
            "fingerprint": "f3:81:b7:7d:22:79:32:ce:ad:40:43:d6:2d:32:ea:6c",
            "id": "deployer-key",
            "key_name": "deployer-key",
            "key_name_prefix": null,
            "key_pair_id": "key-0299c64d9dd277631",
            "public_key": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDcSI7WLRR9SLK/lf+X0fyISgro5inHPZ0QyRgXyKFmqDyTYLDUwlSPx2w7fyX2CbKrUZoRTSNRLMQsp6w0uWznvnkvVzttqfirABlt1QEOcDMpR8joiF5H8vfYchpdGi3ig5cNRwwPtiSW8ItpW3s/SIAbIBvAd1npa6JnYefuP5G4PBgzrx4n9rzxxiEMVTpAewPyb5E2RVvw6w16RMd5piUHdCAKhz4XRuv6f9FLahYpofRA3REDXX1Lxg21vRSwE6+qMce56W5KyF5D/lck3SZ6iETj25gRFXZO5Ndkt46K+CwUbZZAdUaT4xRFnDn9j/Rg+leVz4WOwuqIc7EzXuo+NKA2DEKQjFRexZ7B4kIyikvsxylbLfEO7eDYPJ/LKYf2OYsC0OIAkzhLtEQs55AIbnfIfOZ67Q11U8//Lke7wXWI5W27sMT73TPrHA8sK8NyGZI33IWDOZzp1Govfq3lqVDCuCAmk4+Ea55VLMtG6+hf3SrgL8O1jRx8C7/WsN/jCkDMeVbSWsfkNY9OCJYWoN43rYzcA/3Mk6jTlqGxIVpcKXYYFnTsQaaR1uZ+QClxZKmbHiOu2/RJId0KonI7sK6zsfKy5eXJR5/FLUC2WuCxKowuL2eZdv1wROwcM6ujIWuUb9Q+HVfOotbUHsIl93QS3FKjo39+oAzy7w==",
            "tags": null
          },
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.ec2.tls_private_key.this"
          ]
        }
      ]
    },
    {
      "module": "module.ec2",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "bastion-sg",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:ap-southeast-2:518667233221:security-group/sg-0155faa475595a703",
            "description": "kubectl_instance_sg",
            "egress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "id": "sg-0155faa475595a703",
            "ingress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 22,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 22
              }
            ],
            "name": "bastion-sg",
            "name_prefix": "",
            "owner_id": "518667233221",
            "revoke_rules_on_delete": false,
            "tags": {
              "Name": "bastion-security-group"
            },
            "timeouts": null,
            "vpc_id": "vpc-0399a799097bf9e06"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.ec2",
      "mode": "managed",
      "type": "tls_private_key",
      "name": "this",
      "provider": "provider[\"registry.terraform.io/hashicorp/tls\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "algorithm": "RSA",
            "ecdsa_curve": "P224",
            "id": "9db562aeb44cefb43653d34ec6ab9754d8cfde5c",
            "private_key_pem": "-----BEGIN RSA PRIVATE KEY-----\n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\n-----END RSA PRIVATE KEY-----\n",
            "public_key_fingerprint_md5": "fd:99:a4:42:a4:9c:1d:69:1d:f9:69:7c:f5:5a:11:26",
            "public_key_openssh": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDcSI7WLRR9SLK/lf+X0fyISgro5inHPZ0QyRgXyKFmqDyTYLDUwlSPx2w7fyX2CbKrUZoRTSNRLMQsp6w0uWznvnkvVzttqfirABlt1QEOcDMpR8joiF5H8vfYchpdGi3ig5cNRwwPtiSW8ItpW3s/SIAbIBvAd1npa6JnYefuP5G4PBgzrx4n9rzxxiEMVTpAewPyb5E2RVvw6w16RMd5piUHdCAKhz4XRuv6f9FLahYpofRA3REDXX1Lxg21vRSwE6+qMce56W5KyF5D/lck3SZ6iETj25gRFXZO5Ndkt46K+CwUbZZAdUaT4xRFnDn9j/Rg+leVz4WOwuqIc7EzXuo+NKA2DEKQjFRexZ7B4kIyikvsxylbLfEO7eDYPJ/LKYf2OYsC0OIAkzhLtEQs55AIbnfIfOZ67Q11U8//Lke7wXWI5W27sMT73TPrHA8sK8NyGZI33IWDOZzp1Govfq3lqVDCuCAmk4+Ea55VLMtG6+hf3SrgL8O1jRx8C7/WsN/jCkDMeVbSWsfkNY9OCJYWoN43rYzcA/3Mk6jTlqGxIVpcKXYYFnTsQaaR1uZ+QClxZKmbHiOu2/RJId0KonI7sK6zsfKy5eXJR5/FLUC2WuCxKowuL2eZdv1wROwcM6ujIWuUb9Q+HVfOotbUHsIl93QS3FKjo39+oAzy7w==\n",
            "public_key_pem": "-----BEGIN PUBLIC KEY-----\nMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEA3EiO1i0UfUiyv5X/l9H8\niEoK6OYpxz2dEMkYF8ihZqg8k2Cw1MJUj8dsO38l9gmyq1GaEU0jUSzELKesNLls\n5755L1c7ban4qwAZbdUBDnAzKUfI6IheR/L32HIaXRot4oOXDUcMD7YklvCLaVt7\nP0iAGyAbwHdZ6WuiZ2Hn7j+RuDwYM68eJ/a88cYhDFU6QHsD8m+RNkVb8OsNekTH\neaYlB3QgCoc+F0br+n/RS2oWKaH0QN0RA119S8YNtb0UsBOvqjHHueluSsheQ/5X\nJN0meohE49uYERV2TuTXZLeOivgsFG2WQHVGk+MURZw5/Y/0YPpXlc+FjsLqiHOx\nM17qPjSgNgxCkIxUXsWeweJCMopL7McpWy3xDu3g2DyfyymH9jmLAtDiAJM4S7RE\nLOeQCG53yHzmeu0NdVPP/y5Hu8F1iOVtu7DE+90z6xwPLCvDchmSN9yFgzmc6dRq\nL36t5alQwrggJpOPhGueVSzLRuvoX90q4C/DtY0cfAu/1rDf4wpAzHlW0lrH5DWP\nTgiWFqDeN62M3AP9zJOo05ahsSFaXCl2GBZ07EGmkdbmfkApcWSpmx4jrtv0SSHd\nCqJyO7Cus7HysuXlyUefxS1AtlrgsSqMLi9nmXb9cETsHDOroyFrlG/UPh1XzqLW\n1B7CJfd0EtxSo6N/fqAM8u8CAwEAAQ==\n-----END PUBLIC KEY-----\n",
            "rsa_bits": 4096
          },
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.ecr",
      "mode": "managed",
      "type": "aws_ecr_lifecycle_policy",
      "name": "ecr-policy-demo",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "id": "go-demo-1",
            "policy": "{\"rules\":[{\"rulePriority\":1,\"description\":\"remove image more than 5\",\"selection\":{\"tagStatus\":\"any\",\"countType\":\"imageCountMoreThan\",\"countNumber\":5},\"action\":{\"type\":\"expire\"}}]}",
            "registry_id": "518667233221",
            "repository": "go-demo-1"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecr.aws_ecr_repository.ecr-demo"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 0,
          "attributes": {
            "id": "go-demo-2",
            "policy": "{\"rules\":[{\"rulePriority\":1,\"description\":\"remove image more than 5\",\"selection\":{\"tagStatus\":\"any\",\"countType\":\"imageCountMoreThan\",\"countNumber\":5},\"action\":{\"type\":\"expire\"}}]}",
            "registry_id": "518667233221",
            "repository": "go-demo-2"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecr.aws_ecr_repository.ecr-demo"
          ]
        }
      ]
    },
    {
      "module": "module.ecr",
      "mode": "managed",
      "type": "aws_ecr_repository",
      "name": "ecr-demo",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ecr:ap-southeast-2:518667233221:repository/go-demo-1",
            "encryption_configuration": [
              {
                "encryption_type": "AES256",
                "kms_key": ""
              }
            ],
            "id": "go-demo-1",
            "image_scanning_configuration": [
              {
                "scan_on_push": false
              }
            ],
            "image_tag_mutability": "MUTABLE",
            "name": "go-demo-1",
            "registry_id": "518667233221",
            "repository_url": "518667233221.dkr.ecr.ap-southeast-2.amazonaws.com/go-demo-1",
            "tags": null,
            "timeouts": null
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiZGVsZXRlIjoxMjAwMDAwMDAwMDAwfX0="
        },
        {
          "index_key": 1,
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ecr:ap-southeast-2:518667233221:repository/go-demo-2",
            "encryption_configuration": [
              {
                "encryption_type": "AES256",
                "kms_key": ""
              }
            ],
            "id": "go-demo-2",
            "image_scanning_configuration": [
              {
                "scan_on_push": false
              }
            ],
            "image_tag_mutability": "MUTABLE",
            "name": "go-demo-2",
            "registry_id": "518667233221",
            "repository_url": "518667233221.dkr.ecr.ap-southeast-2.amazonaws.com/go-demo-2",
            "tags": null,
            "timeouts": null
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiZGVsZXRlIjoxMjAwMDAwMDAwMDAwfX0="
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "data",
      "type": "template_file",
      "name": "user_data",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "0ffc9191def4146bdf1142d5878a0fea0178c7783100ee1de8f4e073b26283f1",
            "rendered": "#!/bin/bash\r\nsudo yum update -y ecs-init\r\necho ECS_CLUSTER=ecs-demo \u003e\u003e /etc/ecs/ecs.config;\r\necho ECS_BACKEND_HOST= \u003e\u003e /etc/ecs/ecs.config;\r\necho ECS_ENGINE_TASK_CLEANUP_WAIT_DURATION=15m \u003e\u003e /etc/ecs/ecs.config;\r\necho ECS_IMAGE_CLEANUP_INTERVAL=10m \u003e\u003e /etc/ecs/ecs.config;\r\necho ECS_IMAGE_MINIMUM_CLEANUP_AGE=15m \u003e\u003e /etc/ecs/ecs.config;\r\ntouch /etc/sysctl.d/50-coredump.conf\r\necho \"kernel.core_pattern=|/bin/false\" \u003e\u003e /etc/sysctl.d/50-coredump.conf\r\nsysctl -p /etc/sysctl.d/50-coredump.conf\r\nsudo service docker restart \u0026\u0026 sudo start ecs",
            "template": "#!/bin/bash\r\nsudo yum update -y ecs-init\r\necho ECS_CLUSTER=${cluster_name} \u003e\u003e /etc/ecs/ecs.config;\r\necho ECS_BACKEND_HOST= \u003e\u003e /etc/ecs/ecs.config;\r\necho ECS_ENGINE_TASK_CLEANUP_WAIT_DURATION=15m \u003e\u003e /etc/ecs/ecs.config;\r\necho ECS_IMAGE_CLEANUP_INTERVAL=10m \u003e\u003e /etc/ecs/ecs.config;\r\necho ECS_IMAGE_MINIMUM_CLEANUP_AGE=15m \u003e\u003e /etc/ecs/ecs.config;\r\ntouch /etc/sysctl.d/50-coredump.conf\r\necho \"kernel.core_pattern=|/bin/false\" \u003e\u003e /etc/sysctl.d/50-coredump.conf\r\nsysctl -p /etc/sysctl.d/50-coredump.conf\r\nsudo service docker restart \u0026\u0026 sudo start ecs",
            "vars": {
              "cluster_name": "ecs-demo"
            }
          }
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_appautoscaling_policy",
      "name": "demo-task-autoscale-policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:autoscaling:ap-southeast-2:518667233221:scalingPolicy:2295aed1-d12a-44d7-8194-9455be6dd134:resource/ecs/service/ecs-demo/ecs-service-demo:policyName/demo-task-autoscale-policy",
            "id": "demo-task-autoscale-policy",
            "name": "demo-task-autoscale-policy",
            "policy_type": "TargetTrackingScaling",
            "resource_id": "service/ecs-demo/ecs-service-demo",
            "scalable_dimension": "ecs:service:DesiredCount",
            "service_namespace": "ecs",
            "step_scaling_policy_configuration": [],
            "target_tracking_scaling_policy_configuration": [
              {
                "customized_metric_specification": [],
                "disable_scale_in": false,
                "predefined_metric_specification": [
                  {
                    "predefined_metric_type": "ECSServiceAverageCPUUtilization",
                    "resource_label": ""
                  }
                ],
                "scale_in_cooldown": 300,
                "scale_out_cooldown": 300,
                "target_value": 80
              }
            ]
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs.aws_appautoscaling_target.demo-service-target",
            "module.ecs.aws_iam_role.ecs-autoscaling-role"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_appautoscaling_target",
      "name": "demo-service-target",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "service/ecs-demo/ecs-service-demo",
            "max_capacity": 6,
            "min_capacity": 1,
            "resource_id": "service/ecs-demo/ecs-service-demo",
            "role_arn": "arn:aws:iam::518667233221:role/aws-service-role/ecs.application-autoscaling.amazonaws.com/AWSServiceRoleForApplicationAutoScaling_ECSService",
            "scalable_dimension": "ecs:service:DesiredCount",
            "service_namespace": "ecs"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs.aws_iam_role.ecs-autoscaling-role"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_autoscaling_group",
      "name": "autoscaling-demo",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:autoscaling:ap-southeast-2:518667233221:autoScalingGroup:983dc2d7-a47f-43ca-9b45-a0fad9e008ff:autoScalingGroupName/autoscaling-instance-demo",
            "availability_zones": [
              "ap-southeast-2a",
              "ap-southeast-2b",
              "ap-southeast-2c"
            ],
            "default_cooldown": 300,
            "desired_capacity": 3,
            "enabled_metrics": null,
            "force_delete": false,
            "health_check_grace_period": 60,
            "health_check_type": "EC2",
            "id": "autoscaling-instance-demo",
            "initial_lifecycle_hook": [],
            "launch_configuration": "",
            "launch_template": [],
            "load_balancers": null,
            "max_instance_lifetime": 0,
            "max_size": 5,
            "metrics_granularity": "1Minute",
            "min_elb_capacity": null,
            "min_size": 1,
            "mixed_instances_policy": [
              {
                "instances_distribution": [
                  {
                    "on_demand_allocation_strategy": "prioritized",
                    "on_demand_base_capacity": 3,
                    "on_demand_percentage_above_base_capacity": 0,
                    "spot_allocation_strategy": "lowest-price",
                    "spot_instance_pools": 2,
                    "spot_max_price": ""
                  }
                ],
                "launch_template": [
                  {
                    "launch_template_specification": [
                      {
                        "launch_template_id": "lt-092b2974462615dfa",
                        "launch_template_name": "ecs-template-demo",
                        "version": "$Latest"
                      }
                    ],
                    "override": [
                      {
                        "instance_type": "t3.large",
                        "weighted_capacity": "3"
                      }
                    ]
                  }
                ]
              }
            ],
            "name": "autoscaling-instance-demo",
            "name_prefix": null,
            "placement_group": "",
            "protect_from_scale_in": true,
            "service_linked_role_arn": "arn:aws:iam::518667233221:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling",
            "suspended_processes": null,
            "tag": [
              {
                "key": "AmazonECSManaged",
                "propagate_at_launch": true,
                "value": ""
              }
            ],
            "tags": null,
            "target_group_arns": null,
            "termination_policies": null,
            "timeouts": null,
            "vpc_zone_identifier": [
              "subnet-04ccce881f5c5241f",
              "subnet-057233acbecd18a04",
              "subnet-0d06ff2fe9c9a7e24"
            ],
            "wait_for_capacity_timeout": "10m",
            "wait_for_elb_capacity": null
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiZGVsZXRlIjo2MDAwMDAwMDAwMDB9fQ==",
          "dependencies": [
            "module.ecs.aws_iam_instance_profile.demo-profile",
            "module.ecs.aws_iam_role.demo-role",
            "module.ecs.aws_key_pair.this",
            "module.ecs.aws_launch_template.ecs_instance_template",
            "module.ecs.aws_security_group.launch-templates-sg",
            "module.ecs.data.template_file.user_data",
            "module.ecs.tls_private_key.this",
            "module.vpc.aws_subnet.nodes_subnet",
            "module.vpc.aws_vpc.this",
            "module.vpc.data.aws_availability_zones.available"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_ecs_capacity_provider",
      "name": "capacity-provider",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ecs:ap-southeast-2:518667233221:capacity-provider/capacity-provider-demo",
            "auto_scaling_group_provider": [
              {
                "auto_scaling_group_arn": "arn:aws:autoscaling:ap-southeast-2:518667233221:autoScalingGroup:983dc2d7-a47f-43ca-9b45-a0fad9e008ff:autoScalingGroupName/autoscaling-instance-demo",
                "managed_scaling": [
                  {
                    "maximum_scaling_step_size": 10000,
                    "minimum_scaling_step_size": 1,
                    "status": "ENABLED",
                    "target_capacity": 100
                  }
                ],
                "managed_termination_protection": "ENABLED"
              }
            ],
            "id": "arn:aws:ecs:ap-southeast-2:518667233221:capacity-provider/capacity-provider-demo",
            "name": "capacity-provider-demo",
            "tags": null
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs.aws_autoscaling_group.autoscaling-demo",
            "module.ecs.aws_iam_instance_profile.demo-profile",
            "module.ecs.aws_iam_role.demo-role",
            "module.ecs.aws_key_pair.this",
            "module.ecs.aws_launch_template.ecs_instance_template",
            "module.ecs.aws_security_group.launch-templates-sg",
            "module.ecs.data.template_file.user_data",
            "module.ecs.tls_private_key.this",
            "module.vpc.aws_subnet.nodes_subnet",
            "module.vpc.aws_vpc.this",
            "module.vpc.data.aws_availability_zones.available"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_ecs_cluster",
      "name": "ecs-demo",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ecs:ap-southeast-2:518667233221:cluster/ecs-demo",
            "capacity_providers": [
              "capacity-provider-demo"
            ],
            "default_capacity_provider_strategy": [],
            "id": "arn:aws:ecs:ap-southeast-2:518667233221:cluster/ecs-demo",
            "name": "ecs-demo",
            "setting": [
              {
                "name": "containerInsights",
                "value": "disabled"
              }
            ],
            "tags": null
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs.aws_autoscaling_group.autoscaling-demo",
            "module.ecs.aws_ecs_capacity_provider.capacity-provider",
            "module.ecs.aws_iam_instance_profile.demo-profile",
            "module.ecs.aws_iam_role.demo-role",
            "module.ecs.aws_key_pair.this",
            "module.ecs.aws_launch_template.ecs_instance_template",
            "module.ecs.aws_security_group.launch-templates-sg",
            "module.ecs.data.template_file.user_data",
            "module.ecs.tls_private_key.this",
            "module.vpc.aws_subnet.nodes_subnet",
            "module.vpc.aws_vpc.this",
            "module.vpc.data.aws_availability_zones.available"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_ecs_service",
      "name": "ecs-service-demo",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "capacity_provider_strategy": [
              {
                "base": 0,
                "capacity_provider": "capacity-provider-demo",
                "weight": 1
              }
            ],
            "cluster": "arn:aws:ecs:ap-southeast-2:518667233221:cluster/ecs-demo",
            "deployment_controller": [
              {
                "type": "ECS"
              }
            ],
            "deployment_maximum_percent": 200,
            "deployment_minimum_healthy_percent": 100,
            "desired_count": 3,
            "enable_ecs_managed_tags": false,
            "force_new_deployment": null,
            "health_check_grace_period_seconds": 0,
            "iam_role": "aws-service-role",
            "id": "arn:aws:ecs:ap-southeast-2:518667233221:service/ecs-service-demo",
            "launch_type": "",
            "load_balancer": [
              {
                "container_name": "go-demo-1",
                "container_port": 8080,
                "elb_name": "",
                "target_group_arn": "arn:aws:elasticloadbalancing:ap-southeast-2:518667233221:targetgroup/demo-tg/537b113460a8feab"
              }
            ],
            "name": "ecs-service-demo",
            "network_configuration": [
              {
                "assign_public_ip": false,
                "security_groups": [
                  "sg-0c3c4c4192fd39742"
                ],
                "subnets": [
                  "subnet-04ccce881f5c5241f",
                  "subnet-057233acbecd18a04",
                  "subnet-0d06ff2fe9c9a7e24"
                ]
              }
            ],
            "ordered_placement_strategy": [
              {
                "field": "attribute:ecs.availability-zone",
                "type": "spread"
              },
              {
                "field": "instanceId",
                "type": "spread"
              },
              {
                "field": "cpu",
                "type": "binpack"
              }
            ],
            "placement_constraints": [
              {
                "expression": "attribute:ecs.availability-zone in [ap-southeast-2a, ap-southeast-2b, ap-southeast-2c]",
                "type": "memberOf"
              }
            ],
            "platform_version": "",
            "propagate_tags": "NONE",
            "scheduling_strategy": "REPLICA",
            "service_registries": [
              {
                "container_name": "go-demo-1",
                "container_port": 0,
                "port": 0,
                "registry_arn": "arn:aws:servicediscovery:ap-southeast-2:518667233221:service/srv-mozmtsq23egqq6ak"
              }
            ],
            "tags": null,
            "task_definition": "arn:aws:ecs:ap-southeast-2:518667233221:task-definition/task-definition-family-demo:8",
            "timeouts": null
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiZGVsZXRlIjoxMjAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "module.ecs.aws_autoscaling_group.autoscaling-demo",
            "module.ecs.aws_ecs_capacity_provider.capacity-provider",
            "module.ecs.aws_ecs_cluster.ecs-demo",
            "module.ecs.aws_ecs_task_definition.task-definition-demo",
            "module.ecs.aws_iam_instance_profile.demo-profile",
            "module.ecs.aws_iam_role.demo-role",
            "module.ecs.aws_iam_role.task-definition-role-demo",
            "module.ecs.aws_iam_role.task-execution-role-demo",
            "module.ecs.aws_key_pair.this",
            "module.ecs.aws_launch_template.ecs_instance_template",
            "module.ecs.aws_lb.demo-alb",
            "module.ecs.aws_lb_target_group.demo-tg",
            "module.ecs.aws_security_group.alb-demo-sg",
            "module.ecs.aws_security_group.ecs-service-demo-sg",
            "module.ecs.aws_security_group.launch-templates-sg",
            "module.ecs.aws_service_discovery_private_dns_namespace.demo-service-discovery-private-dns",
            "module.ecs.aws_service_discovery_service.service-discovery-demo",
            "module.ecs.data.template_file.user_data",
            "module.ecs.tls_private_key.this",
            "module.vpc.aws_subnet.nodes_subnet",
            "module.vpc.aws_subnet.public_subnet",
            "module.vpc.aws_vpc.this",
            "module.vpc.data.aws_availability_zones.available"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_ecs_task_definition",
      "name": "task-definition-demo",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ecs:ap-southeast-2:518667233221:task-definition/task-definition-family-demo:8",
            "container_definitions": "[{\"cpu\":256,\"environment\":[],\"essential\":true,\"image\":\"518667233221.dkr.ecr.ap-southeast-2.amazonaws.com/go-demo-1:latest\",\"memory\":128,\"mountPoints\":[],\"name\":\"go-demo-1\",\"portMappings\":[{\"containerPort\":8080,\"hostPort\":8080,\"protocol\":\"tcp\"}],\"volumesFrom\":[]}]",
            "cpu": "",
            "execution_role_arn": "arn:aws:iam::518667233221:role/task-execution-role-demo",
            "family": "task-definition-family-demo",
            "id": "task-definition-family-demo",
            "inference_accelerator": [],
            "ipc_mode": "",
            "memory": "",
            "network_mode": "awsvpc",
            "pid_mode": "",
            "placement_constraints": [
              {
                "expression": "attribute:ecs.availability-zone in [ap-southeast-2a, ap-southeast-2b, ap-southeast-2c]",
                "type": "memberOf"
              }
            ],
            "proxy_configuration": [],
            "requires_compatibilities": null,
            "revision": 8,
            "tags": null,
            "task_role_arn": "arn:aws:iam::518667233221:role/task-definition-role-demo",
            "volume": [
              {
                "docker_volume_configuration": [],
                "efs_volume_configuration": [],
                "host_path": "/ecs/service-storage",
                "name": "demo-storage"
              }
            ]
          },
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.ecs.aws_iam_role.task-definition-role-demo",
            "module.ecs.aws_iam_role.task-execution-role-demo"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_iam_instance_profile",
      "name": "demo-profile",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::518667233221:instance-profile/demo-profile",
            "create_date": "2020-10-13T13:28:03Z",
            "id": "demo-profile",
            "name": "demo-profile",
            "name_prefix": null,
            "path": "/",
            "role": "demo-role",
            "unique_id": "AIPAXRQXZ47CZFZ252W67"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs.aws_iam_role.demo-role"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "demo-role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::518667233221:role/demo-role",
            "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
            "create_date": "2020-10-13T13:28:00Z",
            "description": "",
            "force_detach_policies": false,
            "id": "demo-role",
            "max_session_duration": 3600,
            "name": "demo-role",
            "name_prefix": null,
            "path": "/",
            "permissions_boundary": null,
            "tags": null,
            "unique_id": "AROAXRQXZ47CZQA3NA352"
          },
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "ecs-autoscaling-role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::518667233221:role/ecs-autoscaling-role",
            "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
            "create_date": "2020-10-13T13:28:00Z",
            "description": "",
            "force_detach_policies": false,
            "id": "ecs-autoscaling-role",
            "max_session_duration": 3600,
            "name": "ecs-autoscaling-role",
            "name_prefix": null,
            "path": "/",
            "permissions_boundary": null,
            "tags": {
              "env": "demo"
            },
            "unique_id": "AROAXRQXZ47C3YGPAOTQX"
          },
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "ecs-service-role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::518667233221:role/ecs-service-role",
            "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
            "create_date": "2020-10-13T13:28:01Z",
            "description": "",
            "force_detach_policies": false,
            "id": "ecs-service-role",
            "max_session_duration": 3600,
            "name": "ecs-service-role",
            "name_prefix": null,
            "path": "/",
            "permissions_boundary": null,
            "tags": null,
            "unique_id": "AROAXRQXZ47C7B25V7D5H"
          },
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "task-definition-role-demo",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::518667233221:role/task-definition-role-demo",
            "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
            "create_date": "2020-10-13T13:28:00Z",
            "description": "",
            "force_detach_policies": false,
            "id": "task-definition-role-demo",
            "max_session_duration": 3600,
            "name": "task-definition-role-demo",
            "name_prefix": null,
            "path": "/",
            "permissions_boundary": null,
            "tags": {
              "Name": "Task Definition Role"
            },
            "unique_id": "AROAXRQXZ47CWKYBIT4VC"
          },
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "task-execution-role-demo",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::518667233221:role/task-execution-role-demo",
            "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
            "create_date": "2020-10-13T13:28:00Z",
            "description": "",
            "force_detach_policies": false,
            "id": "task-execution-role-demo",
            "max_session_duration": 3600,
            "name": "task-execution-role-demo",
            "name_prefix": null,
            "path": "/",
            "permissions_boundary": null,
            "tags": {
              "Name": "Task Execution Role"
            },
            "unique_id": "AROAXRQXZ47CZCWGQO4B6"
          },
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "ecs-service-role-policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "ecs-service-role:ecs-service-role-policy",
            "name": "ecs-service-role-policy",
            "name_prefix": null,
            "policy": "{\r\n    \"Version\": \"2012-10-17\",\r\n    \"Statement\": [\r\n        {\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": [\r\n                \"ec2:DescribeTags\",\r\n                \"ecs:CreateCluster\",\r\n                \"ecs:DeregisterContainerInstance\",\r\n                \"ecs:DiscoverPollEndpoint\",\r\n                \"ecs:Poll\",\r\n                \"ecs:RegisterContainerInstance\",\r\n                \"ecs:StartTelemetrySession\",\r\n                \"ecs:UpdateContainerInstancesState\",\r\n                \"ecs:Submit*\",\r\n                \"ecr:GetAuthorizationToken\",\r\n                \"ecr:BatchCheckLayerAvailability\",\r\n                \"ecr:GetDownloadUrlForLayer\",\r\n                \"ecr:BatchGetImage\",\r\n                \"logs:CreateLogStream\",\r\n                \"logs:PutLogEvents\"\r\n            ],\r\n            \"Resource\": \"*\"\r\n        }\r\n    ]\r\n}\r\n",
            "role": "ecs-service-role"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs.aws_iam_role.ecs-service-role"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "demo-profile-attachment",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "demo-role-20201013132803473800000001",
            "policy_arn": "arn:aws:iam::aws:policy/AdministratorAccess",
            "role": "demo-role"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs.aws_iam_role.demo-role"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "demo-role-attach",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "ecs-autoscaling-role-20201013132804236500000004",
            "policy_arn": "arn:aws:iam::aws:policy/service-role/AmazonEC2ContainerServiceAutoscaleRole",
            "role": "ecs-autoscaling-role"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs.aws_iam_role.ecs-autoscaling-role"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "iam-role-policy-attachment-task-definition-demo",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "task-definition-role-demo-20201013132803505100000003",
            "policy_arn": "arn:aws:iam::aws:policy/AdministratorAccess",
            "role": "task-definition-role-demo"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs.aws_iam_role.task-definition-role-demo"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "iam-role-policy-attachment-task-execution-demo",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "task-execution-role-demo-20201013132803476900000002",
            "policy_arn": "arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy",
            "role": "task-execution-role-demo"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs.aws_iam_role.task-execution-role-demo"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_key_pair",
      "name": "this",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:ap-southeast-2:518667233221:key-pair/deployer-key-autoscaling",
            "fingerprint": "0a:00:6f:fe:8a:5c:59:48:ec:3d:82:09:46:11:72:c6",
            "id": "deployer-key-autoscaling",
            "key_name": "deployer-key-autoscaling",
            "key_name_prefix": null,
            "key_pair_id": "key-0871b69c8478a0e81",
            "public_key": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC+bBp3hq5pR+M6PZHiE+3BGy/e8eisBW52vW1mmKMe/rYcyQuqsfegWYrodQHarVxSe6vO6o2sHlFleSciFEKZkfKaLHCWm2vaQWH5NqiZbfaNuRowlXV5vh5ffZBd3e8S5iQaS4LPRWrcMvHoa+QXDgORe4UrIIRa2NOlDAl3jDQHYgsgHIAyaLy8hDu31ldmhDxtfKNMyAp10LSsgYwJTm7+Fxtq+GWKaGsbxSTc+icNLCpeDDFDnvhfU11I4Pxsbt4vjPWtDU/RVIcJ/IMBAaw0IUNthijH+Hh2Djx1HIDSIPNuw7764nNsSjH6n1ChTxXt2PPpMKE8C0eN5cpsc4G2pspz057aB1dl1sWW9oC6MEZ5POaVQUBiSo+XX/fJgEEcJYulwq/C7gEjvJDbj4foyv8PWG+Z63B7d+3bpibswM7dBroDEg2X7gYyUfL1OALQwKnarO7OyyIJclDXnppx4wJ9CML+krj7uKyZOQlc0sgVRGyy4m/V3f+/oFXJarqkPiOoJwV+ZAp/u+y70vX5y+plBuL8CGpC5wVxsPM2sD5ku3TO8vMUJa1L9WR8guSCZ1is6mlJNKb3vg0VrdjctVV8JnrBimGYHB00eQksrQvc+7rTnQMmXm/f5rEiG/faJFWhwc750Uk4BY7tiY6xgNT0mO0UpcnGmeWNuQ==",
            "tags": null
          },
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.ecs.tls_private_key.this"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_launch_template",
      "name": "ecs_instance_template",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:ap-southeast-2:518667233221:launch-template/lt-092b2974462615dfa",
            "block_device_mappings": [],
            "capacity_reservation_specification": [],
            "cpu_options": [],
            "credit_specification": [],
            "default_version": 1,
            "description": "",
            "disable_api_termination": false,
            "ebs_optimized": "",
            "elastic_gpu_specifications": [],
            "elastic_inference_accelerator": [],
            "hibernation_options": [],
            "iam_instance_profile": [
              {
                "arn": "arn:aws:iam::518667233221:instance-profile/demo-profile",
                "name": ""
              }
            ],
            "id": "lt-092b2974462615dfa",
            "image_id": "ami-05c621ca32de56e7a",
            "instance_initiated_shutdown_behavior": "terminate",
            "instance_market_options": [],
            "instance_type": "t3.large",
            "kernel_id": "",
            "key_name": "deployer-key-autoscaling",
            "latest_version": 1,
            "license_specification": [],
            "metadata_options": [],
            "monitoring": [],
            "name": "ecs-template-demo",
            "name_prefix": null,
            "network_interfaces": [],
            "placement": [],
            "ram_disk_id": "",
            "security_group_names": null,
            "tag_specifications": [
              {
                "resource_type": "instance",
                "tags": {
                  "Name": "ecs-template-demo"
                }
              }
            ],
            "tags": null,
            "update_default_version": null,
            "user_data": "IyEvYmluL2Jhc2gNCnN1ZG8geXVtIHVwZGF0ZSAteSBlY3MtaW5pdA0KZWNobyBFQ1NfQ0xVU1RFUj1lY3MtZGVtbyA+PiAvZXRjL2Vjcy9lY3MuY29uZmlnOw0KZWNobyBFQ1NfQkFDS0VORF9IT1NUPSA+PiAvZXRjL2Vjcy9lY3MuY29uZmlnOw0KZWNobyBFQ1NfRU5HSU5FX1RBU0tfQ0xFQU5VUF9XQUlUX0RVUkFUSU9OPTE1bSA+PiAvZXRjL2Vjcy9lY3MuY29uZmlnOw0KZWNobyBFQ1NfSU1BR0VfQ0xFQU5VUF9JTlRFUlZBTD0xMG0gPj4gL2V0Yy9lY3MvZWNzLmNvbmZpZzsNCmVjaG8gRUNTX0lNQUdFX01JTklNVU1fQ0xFQU5VUF9BR0U9MTVtID4+IC9ldGMvZWNzL2Vjcy5jb25maWc7DQp0b3VjaCAvZXRjL3N5c2N0bC5kLzUwLWNvcmVkdW1wLmNvbmYNCmVjaG8gImtlcm5lbC5jb3JlX3BhdHRlcm49fC9iaW4vZmFsc2UiID4+IC9ldGMvc3lzY3RsLmQvNTAtY29yZWR1bXAuY29uZg0Kc3lzY3RsIC1wIC9ldGMvc3lzY3RsLmQvNTAtY29yZWR1bXAuY29uZg0Kc3VkbyBzZXJ2aWNlIGRvY2tlciByZXN0YXJ0ICYmIHN1ZG8gc3RhcnQgZWNz",
            "vpc_security_group_ids": [
              "sg-09af605e23b9b9a64"
            ]
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs.aws_iam_instance_profile.demo-profile",
            "module.ecs.aws_iam_role.demo-role",
            "module.ecs.aws_key_pair.this",
            "module.ecs.aws_security_group.launch-templates-sg",
            "module.ecs.data.template_file.user_data",
            "module.ecs.tls_private_key.this",
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_lb",
      "name": "demo-alb",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "access_logs": [
              {
                "bucket": "",
                "enabled": false,
                "prefix": ""
              }
            ],
            "arn": "arn:aws:elasticloadbalancing:ap-southeast-2:518667233221:loadbalancer/app/demo-alb/881ec03d13580c5f",
            "arn_suffix": "app/demo-alb/881ec03d13580c5f",
            "customer_owned_ipv4_pool": "",
            "dns_name": "demo-alb-497517786.ap-southeast-2.elb.amazonaws.com",
            "drop_invalid_header_fields": false,
            "enable_cross_zone_load_balancing": null,
            "enable_deletion_protection": false,
            "enable_http2": true,
            "id": "arn:aws:elasticloadbalancing:ap-southeast-2:518667233221:loadbalancer/app/demo-alb/881ec03d13580c5f",
            "idle_timeout": 60,
            "internal": false,
            "ip_address_type": "ipv4",
            "load_balancer_type": "application",
            "name": "demo-alb",
            "name_prefix": null,
            "security_groups": [
              "sg-036546b26335d0d76"
            ],
            "subnet_mapping": [
              {
                "allocation_id": "",
                "outpost_id": "",
                "private_ipv4_address": "",
                "subnet_id": "subnet-0008535141c060e9a"
              },
              {
                "allocation_id": "",
                "outpost_id": "",
                "private_ipv4_address": "",
                "subnet_id": "subnet-029816c4d52d25233"
              },
              {
                "allocation_id": "",
                "outpost_id": "",
                "private_ipv4_address": "",
                "subnet_id": "subnet-0b3051d137e4997dc"
              }
            ],
            "subnets": [
              "subnet-0008535141c060e9a",
              "subnet-029816c4d52d25233",
              "subnet-0b3051d137e4997dc"
            ],
            "tags": {
              "Name": "demo-alb"
            },
            "timeouts": null,
            "vpc_id": "vpc-0399a799097bf9e06",
            "zone_id": "Z1GM3OXH4ZPM65"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.ecs.aws_security_group.alb-demo-sg",
            "module.vpc.aws_subnet.public_subnet",
            "module.vpc.aws_vpc.this",
            "module.vpc.data.aws_availability_zones.available"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_lb_listener",
      "name": "demo-http-listener",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:elasticloadbalancing:ap-southeast-2:518667233221:listener/app/demo-alb/881ec03d13580c5f/75d1b058929f1243",
            "certificate_arn": null,
            "default_action": [
              {
                "authenticate_cognito": [],
                "authenticate_oidc": [],
                "fixed_response": [],
                "forward": [],
                "order": 1,
                "redirect": [],
                "target_group_arn": "arn:aws:elasticloadbalancing:ap-southeast-2:518667233221:targetgroup/demo-tg/537b113460a8feab",
                "type": "forward"
              }
            ],
            "id": "arn:aws:elasticloadbalancing:ap-southeast-2:518667233221:listener/app/demo-alb/881ec03d13580c5f/75d1b058929f1243",
            "load_balancer_arn": "arn:aws:elasticloadbalancing:ap-southeast-2:518667233221:loadbalancer/app/demo-alb/881ec03d13580c5f",
            "port": 80,
            "protocol": "HTTP",
            "ssl_policy": "",
            "timeouts": null
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsicmVhZCI6NjAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "module.ecs.aws_lb.demo-alb",
            "module.ecs.aws_lb_target_group.demo-tg",
            "module.ecs.aws_security_group.alb-demo-sg",
            "module.vpc.aws_subnet.public_subnet",
            "module.vpc.aws_vpc.this",
            "module.vpc.data.aws_availability_zones.available"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_lb_listener_rule",
      "name": "listener-rule-demo",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": [
              {
                "authenticate_cognito": [],
                "authenticate_oidc": [],
                "fixed_response": [],
                "forward": [],
                "order": 1,
                "redirect": [],
                "target_group_arn": "arn:aws:elasticloadbalancing:ap-southeast-2:518667233221:targetgroup/demo-tg/537b113460a8feab",
                "type": "forward"
              }
            ],
            "arn": "arn:aws:elasticloadbalancing:ap-southeast-2:518667233221:listener-rule/app/demo-alb/881ec03d13580c5f/75d1b058929f1243/85465d3ca1b143dc",
            "condition": [
              {
                "host_header": [],
                "http_header": [],
                "http_request_method": [
                  {
                    "values": [
                      "GET",
                      "HEAD"
                    ]
                  }
                ],
                "path_pattern": [],
                "query_string": [],
                "source_ip": []
              },
              {
                "host_header": [],
                "http_header": [],
                "http_request_method": [],
                "path_pattern": [
                  {
                    "values": [
                      "/static/*"
                    ]
                  }
                ],
                "query_string": [],
                "source_ip": []
              }
            ],
            "id": "arn:aws:elasticloadbalancing:ap-southeast-2:518667233221:listener-rule/app/demo-alb/881ec03d13580c5f/75d1b058929f1243/85465d3ca1b143dc",
            "listener_arn": "arn:aws:elasticloadbalancing:ap-southeast-2:518667233221:listener/app/demo-alb/881ec03d13580c5f/75d1b058929f1243",
            "priority": 1
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs.aws_lb.demo-alb",
            "module.ecs.aws_lb_listener.demo-http-listener",
            "module.ecs.aws_lb_target_group.demo-tg",
            "module.ecs.aws_security_group.alb-demo-sg",
            "module.vpc.aws_subnet.public_subnet",
            "module.vpc.aws_vpc.this",
            "module.vpc.data.aws_availability_zones.available"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_lb_target_group",
      "name": "demo-tg",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:elasticloadbalancing:ap-southeast-2:518667233221:targetgroup/demo-tg/537b113460a8feab",
            "arn_suffix": "targetgroup/demo-tg/537b113460a8feab",
            "deregistration_delay": 300,
            "health_check": [
              {
                "enabled": true,
                "healthy_threshold": 5,
                "interval": 30,
                "matcher": "200",
                "path": "/",
                "port": "traffic-port",
                "protocol": "HTTP",
                "timeout": 5,
                "unhealthy_threshold": 2
              }
            ],
            "id": "arn:aws:elasticloadbalancing:ap-southeast-2:518667233221:targetgroup/demo-tg/537b113460a8feab",
            "lambda_multi_value_headers_enabled": false,
            "load_balancing_algorithm_type": "round_robin",
            "name": "demo-tg",
            "name_prefix": null,
            "port": 80,
            "protocol": "HTTP",
            "proxy_protocol_v2": false,
            "slow_start": 0,
            "stickiness": [
              {
                "cookie_duration": 86400,
                "enabled": false,
                "type": "lb_cookie"
              }
            ],
            "tags": null,
            "target_type": "ip",
            "vpc_id": "vpc-0399a799097bf9e06"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs.aws_lb.demo-alb",
            "module.ecs.aws_security_group.alb-demo-sg",
            "module.vpc.aws_subnet.public_subnet",
            "module.vpc.aws_vpc.this",
            "module.vpc.data.aws_availability_zones.available"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "alb-demo-sg",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:ap-southeast-2:518667233221:security-group/sg-036546b26335d0d76",
            "description": "Security Group for application Load Balancer",
            "egress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "id": "sg-036546b26335d0d76",
            "ingress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "name": "alb-demo-sg",
            "name_prefix": "",
            "owner_id": "518667233221",
            "revoke_rules_on_delete": false,
            "tags": {
              "Name": "alb-security-group"
            },
            "timeouts": null,
            "vpc_id": "vpc-0399a799097bf9e06"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "ecs-service-demo-sg",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:ap-southeast-2:518667233221:security-group/sg-0c3c4c4192fd39742",
            "description": "Security Group for ECS Services",
            "egress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "id": "sg-0c3c4c4192fd39742",
            "ingress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "name": "ecs-service-demo-sg",
            "name_prefix": "",
            "owner_id": "518667233221",
            "revoke_rules_on_delete": false,
            "tags": {
              "Name": "ecs-service-demo-sg"
            },
            "timeouts": null,
            "vpc_id": "vpc-0399a799097bf9e06"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "launch-templates-sg",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:ap-southeast-2:518667233221:security-group/sg-09af605e23b9b9a64",
            "description": "Security Group for Launch Template",
            "egress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "id": "sg-09af605e23b9b9a64",
            "ingress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "name": "launch-template-sg",
            "name_prefix": "",
            "owner_id": "518667233221",
            "revoke_rules_on_delete": false,
            "tags": {
              "Name": "launch-template-security-group"
            },
            "timeouts": null,
            "vpc_id": "vpc-0399a799097bf9e06"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_service_discovery_private_dns_namespace",
      "name": "demo-service-discovery-private-dns",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:servicediscovery:ap-southeast-2:518667233221:namespace/ns-noeaeg6k2ysmsvmb",
            "description": "Sample Service Discovery Private DNS",
            "hosted_zone": "Z0383167H7N5CCTJDLTS",
            "id": "ns-noeaeg6k2ysmsvmb",
            "name": "demo.ralali.local",
            "tags": null,
            "vpc": "vpc-0399a799097bf9e06"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_service_discovery_service",
      "name": "service-discovery-demo",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:servicediscovery:ap-southeast-2:518667233221:service/srv-mozmtsq23egqq6ak",
            "description": "",
            "dns_config": [
              {
                "dns_records": [
                  {
                    "ttl": 60,
                    "type": "A"
                  }
                ],
                "namespace_id": "ns-noeaeg6k2ysmsvmb",
                "routing_policy": "MULTIVALUE"
              }
            ],
            "health_check_config": [],
            "health_check_custom_config": [
              {
                "failure_threshold": 1
              }
            ],
            "id": "srv-mozmtsq23egqq6ak",
            "name": "service-discovery-demo",
            "namespace_id": "ns-noeaeg6k2ysmsvmb",
            "tags": null
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs.aws_service_discovery_private_dns_namespace.demo-service-discovery-private-dns",
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "tls_private_key",
      "name": "this",
      "provider": "provider[\"registry.terraform.io/hashicorp/tls\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "algorithm": "RSA",
            "ecdsa_curve": "P224",
            "id": "f14c6e2cc6ec688a030df4a29fa6ac7692882b10",
            "private_key_pem": "-----BEGIN RSA PRIVATE KEY-----\n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\n-----END RSA PRIVATE KEY-----\n",
            "public_key_fingerprint_md5": "7a:40:93:a1:3f:1c:cd:68:ca:a6:b0:5e:ac:d9:74:ad",
            "public_key_openssh": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC+bBp3hq5pR+M6PZHiE+3BGy/e8eisBW52vW1mmKMe/rYcyQuqsfegWYrodQHarVxSe6vO6o2sHlFleSciFEKZkfKaLHCWm2vaQWH5NqiZbfaNuRowlXV5vh5ffZBd3e8S5iQaS4LPRWrcMvHoa+QXDgORe4UrIIRa2NOlDAl3jDQHYgsgHIAyaLy8hDu31ldmhDxtfKNMyAp10LSsgYwJTm7+Fxtq+GWKaGsbxSTc+icNLCpeDDFDnvhfU11I4Pxsbt4vjPWtDU/RVIcJ/IMBAaw0IUNthijH+Hh2Djx1HIDSIPNuw7764nNsSjH6n1ChTxXt2PPpMKE8C0eN5cpsc4G2pspz057aB1dl1sWW9oC6MEZ5POaVQUBiSo+XX/fJgEEcJYulwq/C7gEjvJDbj4foyv8PWG+Z63B7d+3bpibswM7dBroDEg2X7gYyUfL1OALQwKnarO7OyyIJclDXnppx4wJ9CML+krj7uKyZOQlc0sgVRGyy4m/V3f+/oFXJarqkPiOoJwV+ZAp/u+y70vX5y+plBuL8CGpC5wVxsPM2sD5ku3TO8vMUJa1L9WR8guSCZ1is6mlJNKb3vg0VrdjctVV8JnrBimGYHB00eQksrQvc+7rTnQMmXm/f5rEiG/faJFWhwc750Uk4BY7tiY6xgNT0mO0UpcnGmeWNuQ==\n",
            "public_key_pem": "-----BEGIN PUBLIC KEY-----\nMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAvmwad4auaUfjOj2R4hPt\nwRsv3vHorAVudr1tZpijHv62HMkLqrH3oFmK6HUB2q1cUnurzuqNrB5RZXknIhRC\nmZHymixwlptr2kFh+TaomW32jbkaMJV1eb4eX32QXd3vEuYkGkuCz0Vq3DLx6Gvk\nFw4DkXuFKyCEWtjTpQwJd4w0B2ILIByAMmi8vIQ7t9ZXZoQ8bXyjTMgKddC0rIGM\nCU5u/hcbavhlimhrG8Uk3PonDSwqXgwxQ574X1NdSOD8bG7eL4z1rQ1P0VSHCfyD\nAQGsNCFDbYYox/h4dg48dRyA0iDzbsO++uJzbEox+p9QoU8V7djz6TChPAtHjeXK\nbHOBtqbKc9Oe2gdXZdbFlvaAujBGeTzmlUFAYkqPl1/3yYBBHCWLpcKvwu4BI7yQ\n24+H6Mr/D1hvmetwe3ft26Ym7MDO3Qa6AxINl+4GMlHy9TgC0MCp2qzuzssiCXJQ\n156aceMCfQjC/pK4+7ismTkJXNLIFURssuJv1d3/v6BVyWq6pD4jqCcFfmQKf7vs\nu9L1+cvqZQbi/AhqQucFcbDzNrA+ZLt0zvLzFCWtS/VkfILkgmdYrOppSTSm974N\nFa3Y3LVVfCZ6wYphmBwdNHkJLK0L3Pu6050DJl5v3+axIhv32iRVocHO+dFJOAWO\n7YmOsYDU9JjtFKXJxpnljbkCAwEAAQ==\n-----END PUBLIC KEY-----\n",
            "rsa_bits": 4096
          },
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "data",
      "type": "aws_availability_zones",
      "name": "available",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "all_availability_zones": null,
            "exclude_names": null,
            "exclude_zone_ids": null,
            "filter": null,
            "group_names": [
              "ap-southeast-2"
            ],
            "id": "2020-10-13 13:27:45.7987633 +0000 UTC",
            "names": [
              "ap-southeast-2a",
              "ap-southeast-2b",
              "ap-southeast-2c"
            ],
            "state": null,
            "zone_ids": [
              "apse2-az3",
              "apse2-az1",
              "apse2-az2"
            ]
          }
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_eip",
      "name": "eip",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "allocation_id": null,
            "associate_with_private_ip": null,
            "association_id": "",
            "customer_owned_ip": "",
            "customer_owned_ipv4_pool": "",
            "domain": "vpc",
            "id": "eipalloc-077ba09b61fe2252a",
            "instance": "",
            "network_interface": "",
            "private_dns": null,
            "private_ip": "",
            "public_dns": "ec2-13-237-166-126.ap-southeast-2.compute.amazonaws.com",
            "public_ip": "13.237.166.126",
            "public_ipv4_pool": "amazon",
            "tags": {
              "Name": "Elastic IP Nat"
            },
            "timeouts": null,
            "vpc": true
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiZGVsZXRlIjoxODAwMDAwMDAwMDAsInJlYWQiOjkwMDAwMDAwMDAwMCwidXBkYXRlIjozMDAwMDAwMDAwMDB9fQ=="
        },
        {
          "index_key": 1,
          "schema_version": 0,
          "attributes": {
            "allocation_id": null,
            "associate_with_private_ip": null,
            "association_id": "",
            "customer_owned_ip": "",
            "customer_owned_ipv4_pool": "",
            "domain": "vpc",
            "id": "eipalloc-0bdb7d18fe3a8728b",
            "instance": "",
            "network_interface": "",
            "private_dns": null,
            "private_ip": "",
            "public_dns": "ec2-3-105-254-158.ap-southeast-2.compute.amazonaws.com",
            "public_ip": "3.105.254.158",
            "public_ipv4_pool": "amazon",
            "tags": {
              "Name": "Elastic IP Nat"
            },
            "timeouts": null,
            "vpc": true
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiZGVsZXRlIjoxODAwMDAwMDAwMDAsInJlYWQiOjkwMDAwMDAwMDAwMCwidXBkYXRlIjozMDAwMDAwMDAwMDB9fQ=="
        },
        {
          "index_key": 2,
          "schema_version": 0,
          "attributes": {
            "allocation_id": null,
            "associate_with_private_ip": null,
            "association_id": "",
            "customer_owned_ip": "",
            "customer_owned_ipv4_pool": "",
            "domain": "vpc",
            "id": "eipalloc-02177a812489bc2fa",
            "instance": "",
            "network_interface": "",
            "private_dns": null,
            "private_ip": "",
            "public_dns": "ec2-54-206-144-15.ap-southeast-2.compute.amazonaws.com",
            "public_ip": "54.206.144.15",
            "public_ipv4_pool": "amazon",
            "tags": {
              "Name": "Elastic IP Nat"
            },
            "timeouts": null,
            "vpc": true
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiZGVsZXRlIjoxODAwMDAwMDAwMDAsInJlYWQiOjkwMDAwMDAwMDAwMCwidXBkYXRlIjozMDAwMDAwMDAwMDB9fQ=="
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_internet_gateway",
      "name": "igw",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:ap-southeast-2:518667233221:internet-gateway/igw-00e0d1c6c3b5fa5fd",
            "id": "igw-00e0d1c6c3b5fa5fd",
            "owner_id": "518667233221",
            "tags": {
              "Name": "Internet-Gateway"
            },
            "vpc_id": "vpc-0399a799097bf9e06"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_nat_gateway",
      "name": "nat-gw",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "allocation_id": "eipalloc-077ba09b61fe2252a",
            "id": "nat-01d8f3ffa293b23d3",
            "network_interface_id": "eni-0a250765ebbf1968e",
            "private_ip": "10.43.192.183",
            "public_ip": "13.237.166.126",
            "subnet_id": "subnet-0008535141c060e9a",
            "tags": {
              "Name": "NAT-ap-southeast-2a"
            }
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_eip.eip",
            "module.vpc.aws_subnet.public_subnet",
            "module.vpc.aws_vpc.this",
            "module.vpc.data.aws_availability_zones.available"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 0,
          "attributes": {
            "allocation_id": "eipalloc-0bdb7d18fe3a8728b",
            "id": "nat-02f2fc6832294f445",
            "network_interface_id": "eni-0dc6aff949f27b6bc",
            "private_ip": "10.43.192.203",
            "public_ip": "3.105.254.158",
            "subnet_id": "subnet-0b3051d137e4997dc",
            "tags": {
              "Name": "NAT-ap-southeast-2b"
            }
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_eip.eip",
            "module.vpc.aws_subnet.public_subnet",
            "module.vpc.aws_vpc.this",
            "module.vpc.data.aws_availability_zones.available"
          ]
        },
        {
          "index_key": 2,
          "schema_version": 0,
          "attributes": {
            "allocation_id": "eipalloc-02177a812489bc2fa",
            "id": "nat-0bb935b735852d182",
            "network_interface_id": "eni-05991717b672d8104",
            "private_ip": "10.43.192.214",
            "public_ip": "54.206.144.15",
            "subnet_id": "subnet-029816c4d52d25233",
            "tags": {
              "Name": "NAT-ap-southeast-2c"
            }
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_eip.eip",
            "module.vpc.aws_subnet.public_subnet",
            "module.vpc.aws_vpc.this",
            "module.vpc.data.aws_availability_zones.available"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_route_table",
      "name": "node-rt",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "id": "rtb-069af12a2ffd54621",
            "owner_id": "518667233221",
            "propagating_vgws": [],
            "route": [
              {
                "cidr_block": "0.0.0.0/0",
                "egress_only_gateway_id": "",
                "gateway_id": "nat-01d8f3ffa293b23d3",
                "instance_id": "",
                "ipv6_cidr_block": "",
                "local_gateway_id": "",
                "nat_gateway_id": "",
                "network_interface_id": "",
                "transit_gateway_id": "",
                "vpc_peering_connection_id": ""
              }
            ],
            "tags": {
              "Name": "Nodes-RT-ap-southeast-2a"
            },
            "vpc_id": "vpc-0399a799097bf9e06"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_eip.eip",
            "module.vpc.aws_nat_gateway.nat-gw",
            "module.vpc.aws_subnet.public_subnet",
            "module.vpc.aws_vpc.this",
            "module.vpc.data.aws_availability_zones.available"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 0,
          "attributes": {
            "id": "rtb-05b0a5792e8879b66",
            "owner_id": "518667233221",
            "propagating_vgws": [],
            "route": [
              {
                "cidr_block": "0.0.0.0/0",
                "egress_only_gateway_id": "",
                "gateway_id": "nat-02f2fc6832294f445",
                "instance_id": "",
                "ipv6_cidr_block": "",
                "local_gateway_id": "",
                "nat_gateway_id": "",
                "network_interface_id": "",
                "transit_gateway_id": "",
                "vpc_peering_connection_id": ""
              }
            ],
            "tags": {
              "Name": "Nodes-RT-ap-southeast-2b"
            },
            "vpc_id": "vpc-0399a799097bf9e06"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_eip.eip",
            "module.vpc.aws_nat_gateway.nat-gw",
            "module.vpc.aws_subnet.public_subnet",
            "module.vpc.aws_vpc.this",
            "module.vpc.data.aws_availability_zones.available"
          ]
        },
        {
          "index_key": 2,
          "schema_version": 0,
          "attributes": {
            "id": "rtb-0aa557667fa6330ee",
            "owner_id": "518667233221",
            "propagating_vgws": [],
            "route": [
              {
                "cidr_block": "0.0.0.0/0",
                "egress_only_gateway_id": "",
                "gateway_id": "nat-0bb935b735852d182",
                "instance_id": "",
                "ipv6_cidr_block": "",
                "local_gateway_id": "",
                "nat_gateway_id": "",
                "network_interface_id": "",
                "transit_gateway_id": "",
                "vpc_peering_connection_id": ""
              }
            ],
            "tags": {
              "Name": "Nodes-RT-ap-southeast-2c"
            },
            "vpc_id": "vpc-0399a799097bf9e06"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_eip.eip",
            "module.vpc.aws_nat_gateway.nat-gw",
            "module.vpc.aws_subnet.public_subnet",
            "module.vpc.aws_vpc.this",
            "module.vpc.data.aws_availability_zones.available"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_route_table",
      "name": "public-rt",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "rtb-0befa5d161a329f2f",
            "owner_id": "518667233221",
            "propagating_vgws": [],
            "route": [
              {
                "cidr_block": "0.0.0.0/0",
                "egress_only_gateway_id": "",
                "gateway_id": "igw-00e0d1c6c3b5fa5fd",
                "instance_id": "",
                "ipv6_cidr_block": "",
                "local_gateway_id": "",
                "nat_gateway_id": "",
                "network_interface_id": "",
                "transit_gateway_id": "",
                "vpc_peering_connection_id": ""
              }
            ],
            "tags": {
              "Name": "Public RT"
            },
            "vpc_id": "vpc-0399a799097bf9e06"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_internet_gateway.igw",
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_route_table_association",
      "name": "node_route_assc",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "gateway_id": null,
            "id": "rtbassoc-03167c391aef49592",
            "route_table_id": "rtb-069af12a2ffd54621",
            "subnet_id": "subnet-0d06ff2fe9c9a7e24"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_eip.eip",
            "module.vpc.aws_nat_gateway.nat-gw",
            "module.vpc.aws_route_table.node-rt",
            "module.vpc.aws_subnet.nodes_subnet",
            "module.vpc.aws_subnet.public_subnet",
            "module.vpc.aws_vpc.this",
            "module.vpc.data.aws_availability_zones.available"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 0,
          "attributes": {
            "gateway_id": null,
            "id": "rtbassoc-05f7126300000ddcb",
            "route_table_id": "rtb-05b0a5792e8879b66",
            "subnet_id": "subnet-057233acbecd18a04"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_eip.eip",
            "module.vpc.aws_nat_gateway.nat-gw",
            "module.vpc.aws_route_table.node-rt",
            "module.vpc.aws_subnet.nodes_subnet",
            "module.vpc.aws_subnet.public_subnet",
            "module.vpc.aws_vpc.this",
            "module.vpc.data.aws_availability_zones.available"
          ]
        },
        {
          "index_key": 2,
          "schema_version": 0,
          "attributes": {
            "gateway_id": null,
            "id": "rtbassoc-0949c6240867e6c10",
            "route_table_id": "rtb-0aa557667fa6330ee",
            "subnet_id": "subnet-04ccce881f5c5241f"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_eip.eip",
            "module.vpc.aws_nat_gateway.nat-gw",
            "module.vpc.aws_route_table.node-rt",
            "module.vpc.aws_subnet.nodes_subnet",
            "module.vpc.aws_subnet.public_subnet",
            "module.vpc.aws_vpc.this",
            "module.vpc.data.aws_availability_zones.available"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_route_table_association",
      "name": "public_route_assc",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "gateway_id": null,
            "id": "rtbassoc-0deb9320a3a6fb040",
            "route_table_id": "rtb-0befa5d161a329f2f",
            "subnet_id": "subnet-0008535141c060e9a"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_internet_gateway.igw",
            "module.vpc.aws_route_table.public-rt",
            "module.vpc.aws_subnet.public_subnet",
            "module.vpc.aws_vpc.this",
            "module.vpc.data.aws_availability_zones.available"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 0,
          "attributes": {
            "gateway_id": null,
            "id": "rtbassoc-058d151334f182a0a",
            "route_table_id": "rtb-0befa5d161a329f2f",
            "subnet_id": "subnet-0b3051d137e4997dc"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_internet_gateway.igw",
            "module.vpc.aws_route_table.public-rt",
            "module.vpc.aws_subnet.public_subnet",
            "module.vpc.aws_vpc.this",
            "module.vpc.data.aws_availability_zones.available"
          ]
        },
        {
          "index_key": 2,
          "schema_version": 0,
          "attributes": {
            "gateway_id": null,
            "id": "rtbassoc-053d6b2cc91039b40",
            "route_table_id": "rtb-0befa5d161a329f2f",
            "subnet_id": "subnet-029816c4d52d25233"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_internet_gateway.igw",
            "module.vpc.aws_route_table.public-rt",
            "module.vpc.aws_subnet.public_subnet",
            "module.vpc.aws_vpc.this",
            "module.vpc.data.aws_availability_zones.available"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_subnet",
      "name": "nodes_subnet",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:ap-southeast-2:518667233221:subnet/subnet-0d06ff2fe9c9a7e24",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "ap-southeast-2a",
            "availability_zone_id": "apse2-az3",
            "cidr_block": "10.43.192.128/28",
            "id": "subnet-0d06ff2fe9c9a7e24",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "map_public_ip_on_launch": false,
            "outpost_arn": "",
            "owner_id": "518667233221",
            "tags": {
              "Name": "nodes-subnet-ap-southeast-2a"
            },
            "timeouts": null,
            "vpc_id": "vpc-0399a799097bf9e06"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.vpc.aws_vpc.this",
            "module.vpc.data.aws_availability_zones.available"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:ap-southeast-2:518667233221:subnet/subnet-057233acbecd18a04",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "ap-southeast-2b",
            "availability_zone_id": "apse2-az1",
            "cidr_block": "10.43.192.144/28",
            "id": "subnet-057233acbecd18a04",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "map_public_ip_on_launch": false,
            "outpost_arn": "",
            "owner_id": "518667233221",
            "tags": {
              "Name": "nodes-subnet-ap-southeast-2b"
            },
            "timeouts": null,
            "vpc_id": "vpc-0399a799097bf9e06"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.vpc.aws_vpc.this",
            "module.vpc.data.aws_availability_zones.available"
          ]
        },
        {
          "index_key": 2,
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:ap-southeast-2:518667233221:subnet/subnet-04ccce881f5c5241f",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "ap-southeast-2c",
            "availability_zone_id": "apse2-az2",
            "cidr_block": "10.43.192.160/28",
            "id": "subnet-04ccce881f5c5241f",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "map_public_ip_on_launch": false,
            "outpost_arn": "",
            "owner_id": "518667233221",
            "tags": {
              "Name": "nodes-subnet-ap-southeast-2c"
            },
            "timeouts": null,
            "vpc_id": "vpc-0399a799097bf9e06"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.vpc.aws_vpc.this",
            "module.vpc.data.aws_availability_zones.available"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_subnet",
      "name": "public_subnet",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:ap-southeast-2:518667233221:subnet/subnet-0008535141c060e9a",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "ap-southeast-2a",
            "availability_zone_id": "apse2-az3",
            "cidr_block": "10.43.192.176/28",
            "id": "subnet-0008535141c060e9a",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "map_public_ip_on_launch": false,
            "outpost_arn": "",
            "owner_id": "518667233221",
            "tags": {
              "Name": "public-subnet-ap-southeast-2a"
            },
            "timeouts": null,
            "vpc_id": "vpc-0399a799097bf9e06"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.vpc.aws_vpc.this",
            "module.vpc.data.aws_availability_zones.available"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:ap-southeast-2:518667233221:subnet/subnet-0b3051d137e4997dc",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "ap-southeast-2b",
            "availability_zone_id": "apse2-az1",
            "cidr_block": "10.43.192.192/28",
            "id": "subnet-0b3051d137e4997dc",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "map_public_ip_on_launch": false,
            "outpost_arn": "",
            "owner_id": "518667233221",
            "tags": {
              "Name": "public-subnet-ap-southeast-2b"
            },
            "timeouts": null,
            "vpc_id": "vpc-0399a799097bf9e06"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.vpc.aws_vpc.this",
            "module.vpc.data.aws_availability_zones.available"
          ]
        },
        {
          "index_key": 2,
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:ap-southeast-2:518667233221:subnet/subnet-029816c4d52d25233",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "ap-southeast-2c",
            "availability_zone_id": "apse2-az2",
            "cidr_block": "10.43.192.208/28",
            "id": "subnet-029816c4d52d25233",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "map_public_ip_on_launch": false,
            "outpost_arn": "",
            "owner_id": "518667233221",
            "tags": {
              "Name": "public-subnet-ap-southeast-2c"
            },
            "timeouts": null,
            "vpc_id": "vpc-0399a799097bf9e06"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.vpc.aws_vpc.this",
            "module.vpc.data.aws_availability_zones.available"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_vpc",
      "name": "this",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:ap-southeast-2:518667233221:vpc/vpc-0399a799097bf9e06",
            "assign_generated_ipv6_cidr_block": false,
            "cidr_block": "10.43.192.128/25",
            "default_network_acl_id": "acl-02a60a83c702aa584",
            "default_route_table_id": "rtb-01346bc9eb389a6aa",
            "default_security_group_id": "sg-06f624e8450e8b8c6",
            "dhcp_options_id": "dopt-41d6ac26",
            "enable_classiclink": false,
            "enable_classiclink_dns_support": false,
            "enable_dns_hostnames": true,
            "enable_dns_support": true,
            "id": "vpc-0399a799097bf9e06",
            "instance_tenancy": "default",
            "ipv6_association_id": "",
            "ipv6_cidr_block": "",
            "main_route_table_id": "rtb-01346bc9eb389a6aa",
            "owner_id": "518667233221",
            "tags": {
              "Name": "Demo-VPC"
            }
          },
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ=="
        }
      ]
    }
  ]
}
